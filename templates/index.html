{% extends "base.html" %}

{% block title %}Home - Friend Recommendation System{% endblock %}

{% block content %}
<div class="container">
    <!-- Hero Section -->
    <div class="text-center mb-5 py-5">
        <h1 class="display-3 fw-bold mb-3" style="color: #1e293b;">
            <i class="fas fa-users-cog me-3" style="color: var(--primary-color);"></i> Friend Recommendation System
        </h1>
        <p class="lead fs-4 text-secondary mb-4">Intelligent Social Network Analysis with Machine Learning</p>
        <div class="d-flex justify-content-center gap-3 flex-wrap">
            <span class="badge" style="background: #f1f5f9; color: #475569; font-size: 0.9rem; padding: 10px 20px; border: 1px solid #e2e8f0;">
                <i class="fas fa-database me-2" style="color: var(--primary-color);"></i>PostgreSQL
            </span>
            <span class="badge" style="background: #f1f5f9; color: #475569; font-size: 0.9rem; padding: 10px 20px; border: 1px solid #e2e8f0;">
                <i class="fas fa-brain me-2" style="color: var(--success-color);"></i>Smart Algorithm
            </span>
            <span class="badge" style="background: #f1f5f9; color: #475569; font-size: 0.9rem; padding: 10px 20px; border: 1px solid #e2e8f0;">
                <i class="fas fa-chart-network me-2" style="color: var(--secondary-color);"></i>Graph Analysis
            </span>
        </div>
    </div>

    <!-- Statistics Cards -->
    <div class="row mb-5">
        <div class="col-md-4 mb-4">
            <div class="stat-card">
                <i class="fas fa-user-friends stat-icon"></i>
                <div class="stat-value">{{ stats.total_users if stats else 0 }}</div>
                <div class="stat-label">Total Users</div>
            </div>
        </div>
        <div class="col-md-4 mb-4">
            <div class="stat-card">
                <i class="fas fa-link stat-icon" style="color: var(--success-color);"></i>
                <div class="stat-value">{{ stats.total_connections if stats else 0 }}</div>
                <div class="stat-label">Connections</div>
            </div>
        </div>
        <div class="col-md-4 mb-4">
            <div class="stat-card">
                <i class="fas fa-chart-line stat-icon" style="color: var(--secondary-color);"></i>
                <div class="stat-value">{{ stats.avg_connections if stats else 0 }}</div>
                <div class="stat-label">Avg per User</div>
            </div>
        </div>
    </div>

    <!-- Data Loading Section -->
    <div class="row">
        <div class="col-md-6 mb-4">
            <div class="card h-100" style="border: 2px solid rgba(16, 185, 129, 0.2);">
                <div class="card-header" style="background: linear-gradient(135deg, #10b981, #059669);">
                    <i class="fas fa-database me-2"></i> Load Demo Data
                </div>
                <div class="card-body d-flex flex-column">
                    <div class="upload-area flex-grow-1 d-flex flex-column justify-content-center" style="border-color: #10b981;">
                        <i class="fas fa-bolt" style="font-size: 4rem; color: #10b981; margin-bottom: 20px;"></i>
                        <h4 class="mb-3" style="color: #059669; font-weight: 700;">Quick Start Demo</h4>
                        <p class="text-muted mb-4">Pre-loaded with 100 Indian names and 832 authentic social connections</p>
                        <div class="d-flex justify-content-center gap-3 mb-3">
                            <span class="badge" style="background: #10b981; font-size: 0.9rem; padding: 8px 16px;">
                                <i class="fas fa-users me-1"></i> 100 Users
                            </span>
                            <span class="badge" style="background: #059669; font-size: 0.9rem; padding: 8px 16px;">
                                <i class="fas fa-link me-1"></i> 832 Connections
                            </span>
                        </div>
                        <form action="{{ url_for('load_data') }}" method="POST">
                            <button type="submit" class="btn btn-success btn-lg mt-3" style="padding: 16px 48px; font-size: 1.1rem; border-radius: 15px; box-shadow: 0 8px 20px rgba(16, 185, 129, 0.3);">
                                <i class="fas fa-rocket me-2"></i> Load Demo Data
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-md-6 mb-4">
            <div class="card h-100" style="border: 2px solid rgba(99, 102, 241, 0.2);">
                <div class="card-header">
                    <i class="fas fa-file-upload me-2"></i> Upload Custom Data
                </div>
                <div class="card-body d-flex flex-column">
                    <div class="upload-area flex-grow-1 d-flex flex-column justify-content-center" style="border-color: #6366f1;">
                        <i class="fas fa-cloud-upload-alt" style="font-size: 4rem; background: linear-gradient(135deg, #6366f1, #8b5cf6); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 20px;"></i>
                        <h4 class="mb-3" style="color: #6366f1; font-weight: 700;">Your Own Network</h4>
                        <p class="text-muted mb-4">Upload CSV with your social network data for custom analysis</p>
                        <div class="alert alert-info" style="background: rgba(99, 102, 241, 0.1); border: 1px solid rgba(99, 102, 241, 0.2); border-radius: 12px;">
                            <small><strong>Format:</strong> user1,user2 (one connection per line)</small>
                        </div>
                        <form action="{{ url_for('load_data') }}" method="POST" enctype="multipart/form-data">
                            <div class="mb-3">
                                <input type="file" class="form-control" name="file" accept=".csv" required style="border-radius: 12px; padding: 12px; border: 2px dashed #6366f1;">
                            </div>
                            <button type="submit" class="btn btn-primary btn-lg" style="padding: 16px 48px; font-size: 1.1rem; border-radius: 15px; box-shadow: 0 8px 20px rgba(99, 102, 241, 0.3);">
                                <i class="fas fa-upload me-2"></i> Upload & Load
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Quick Actions -->
    <div class="row mt-5">
        <div class="col-md-12">
            <h3 class="mb-4" style="color: #1e293b; font-weight: 700;">Quick Actions</h3>
            <div class="row g-4">
                <div class="col-md-3">
                    <a href="{{ url_for('analysis') }}" class="text-decoration-none">
                        <div class="action-card" style="background: white; padding: 30px; border-radius: 16px; text-align: center; transition: all 0.3s; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08); border: 1px solid #e2e8f0;">
                            <div style="width: 64px; height: 64px; margin: 0 auto 20px; background: #ede9fe; border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                                <i class="fas fa-chart-pie" style="font-size: 2rem; color: var(--primary-color);"></i>
                            </div>
                            <h5 class="fw-bold mb-2" style="color: #1e293b;">Run Analysis</h5>
                            <p class="mb-0 text-secondary" style="font-size: 0.9rem;">Find influencers & recommendations</p>
                        </div>
                    </a>
                </div>
                <div class="col-md-3">
                    <a href="{{ url_for('visualization') }}" class="text-decoration-none">
                        <div class="action-card" style="background: white; padding: 30px; border-radius: 16px; text-align: center; transition: all 0.3s; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08); border: 1px solid #e2e8f0;">
                            <div style="width: 64px; height: 64px; margin: 0 auto 20px; background: #dcfce7; border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                                <i class="fas fa-project-diagram" style="font-size: 2rem; color: var(--success-color);"></i>
                            </div>
                            <h5 class="fw-bold mb-2" style="color: #1e293b;">Visualize Graph</h5>
                            <p class="mb-0 text-secondary" style="font-size: 0.9rem;">Interactive network diagram</p>
                        </div>
                    </a>
                </div>
                <div class="col-md-3">
                    <button class="btn p-0 border-0 w-100" data-bs-toggle="modal" data-bs-target="#infoModal">
                        <div class="action-card" style="background: white; padding: 30px; border-radius: 16px; text-align: center; transition: all 0.3s; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08); border: 1px solid #e2e8f0;">
                            <div style="width: 64px; height: 64px; margin: 0 auto 20px; background: #dbeafe; border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                                <i class="fas fa-info-circle" style="font-size: 2rem; color: #3b82f6;"></i>
                            </div>
                            <h5 class="fw-bold mb-2" style="color: #1e293b;">How It Works</h5>
                            <p class="mb-0 text-secondary" style="font-size: 0.9rem;">Learn about the system</p>
                                </div>
                            </button>
                        </div>
                        <div class="col-md-3">
                            <form action="{{ url_for('clear_db') }}" method="POST" onsubmit="return confirm('⚠️ Are you sure you want to clear all data?');" class="m-0">
                                <button type="submit" class="btn p-0 border-0 w-100">
                                    <div class="action-card" style="background: white; padding: 30px; border-radius: 16px; text-align: center; transition: all 0.3s; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08); border: 1px solid #e2e8f0;">
                                        <div style="width: 64px; height: 64px; margin: 0 auto 20px; background: #fee2e2; border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                                            <i class="fas fa-trash-alt" style="font-size: 2rem; color: var(--danger-color);"></i>
                                        </div>
                                        <h5 class="fw-bold mb-2" style="color: #1e293b;">Clear Database</h5>
                                        <p class="mb-0 text-secondary" style="font-size: 0.9rem;">Remove all data</p>
                                    </div>
                                </button>
                            </form>
                        </div>
            </div>
            </div>
        </div>
    </div>

    <style>
        .action-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12) !important;
            border-color: var(--primary-color) !important;
        }
    </style>

    <!-- Features Section -->
    <div class="row mt-5 mb-5">
        <div class="col-md-12 mb-4">
            <h3 class="mb-4" style="color: #1e293b; font-weight: 700;">Key Features</h3>
        </div>
        <div class="col-md-3 mb-4">
            <div class="card text-center h-100">
                <div class="card-body p-4">
                    <div style="width: 64px; height: 64px; margin: 0 auto 20px; background: #ede9fe; border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                        <i class="fas fa-user-plus" style="font-size: 2rem; color: var(--primary-color);"></i>
                    </div>
                    <h5 class="fw-bold mb-3" style="color: #1e293b;">Friend Recommendations</h5>
                    <p class="text-muted mb-0">Smart suggestions based on mutual connections and network analysis</p>
                </div>
            </div>
        </div>
        <div class="col-md-3 mb-4">
            <div class="card text-center h-100">
                <div class="card-body p-4">
                    <div style="width: 64px; height: 64px; margin: 0 auto 20px; background: #dcfce7; border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                        <i class="fas fa-users" style="font-size: 2rem; color: var(--success-color);"></i>
                    </div>
                    <h5 class="fw-bold mb-3" style="color: #1e293b;">Mutual Friends</h5>
                    <p class="text-muted mb-0">Discover common connections between any two users in your network</p>
                </div>
            </div>
        </div>
        <div class="col-md-3 mb-4">
            <div class="card text-center h-100">
                <div class="card-body p-4">
                    <div style="width: 64px; height: 64px; margin: 0 auto 20px; background: #fef3c7; border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                        <i class="fas fa-crown" style="font-size: 2rem; color: #f59e0b;"></i>
                    </div>
                    <h5 class="fw-bold mb-3" style="color: #1e293b;">Influencer Detection</h5>
                    <p class="text-muted mb-0">Identify the most connected and influential users in your network</p>
                </div>
            </div>
        </div>
        <div class="col-md-3 mb-4">
            <div class="card text-center h-100" style="border: none; border-radius: 20px; background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(255, 255, 255, 0.98));">
                <div class="card-body p-4">
                    <div style="width: 80px; height: 80px; margin: 0 auto 20px; background: linear-gradient(135deg, #06b6d4, #0891b2); border-radius: 20px; display: flex; align-items: center; justify-content: center; box-shadow: 0 10px 25px rgba(6, 182, 212, 0.3);">
                        <i class="fas fa-eye" style="font-size: 2.5rem; color: white;"></i>
                    </div>
                    <h5 class="fw-bold mb-3">Graph Visualization</h5>
                    <p class="text-muted mb-0">Interactive D3.js powered network diagrams with zoom and pan</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Info Modal -->
<div class="modal fade" id="infoModal" tabindex="-1">
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content" style="border: none; border-radius: 20px; overflow: hidden;">
            <div class="modal-header" style="background: linear-gradient(135deg, #6366f1, #8b5cf6); color: white; border: none; padding: 24px 30px;">
                <h4 class="modal-title fw-bold"><i class="fas fa-info-circle me-2"></i> How It Works</h4>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body p-4">
                <div class="mb-4">
                    <h5 class="fw-bold" style="color: #6366f1;"><i class="fas fa-server me-2"></i> Technology Stack</h5>
                    <div class="row g-3 mt-2">
                        <div class="col-md-6">
                            <div class="p-3" style="background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(139, 92, 246, 0.1)); border-radius: 12px;">
                                <strong><i class="fas fa-database text-primary"></i> Supabase (PostgreSQL)</strong>
                                <p class="mb-0 mt-2 small text-muted">Cloud database for storing social network</p>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="p-3" style="background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(139, 92, 246, 0.1)); border-radius: 12px;">
                                <strong><i class="fab fa-python text-success"></i> Flask</strong>
                                <p class="mb-0 mt-2 small text-muted">Python web framework backend</p>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="p-3" style="background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(139, 92, 246, 0.1)); border-radius: 12px;">
                                <strong><i class="fas fa-chart-network text-info"></i> D3.js</strong>
                                <p class="mb-0 mt-2 small text-muted">Interactive graph visualizations</p>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="p-3" style="background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(139, 92, 246, 0.1)); border-radius: 12px;">
                                <strong><i class="fab fa-bootstrap text-purple"></i> Bootstrap 5</strong>
                                <p class="mb-0 mt-2 small text-muted">Modern responsive UI design</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="mb-4">
                    <h5 class="fw-bold" style="color: #8b5cf6;"><i class="fas fa-brain me-2"></i> Algorithms</h5>
                    <div class="mt-3">
                        <div class="mb-3 p-3" style="border-left: 4px solid #6366f1; background: #f8fafc; border-radius: 8px;">
                            <strong>Friend Recommendations:</strong>
                            <p class="mb-0 mt-1 small">Friends-of-friends algorithm analyzing mutual connections for smart suggestions</p>
                        </div>
                        <div class="mb-3 p-3" style="border-left: 4px solid #8b5cf6; background: #f8fafc; border-radius: 8px;">
                            <strong>Influencer Detection:</strong>
                            <p class="mb-0 mt-1 small">Degree centrality measurement identifying users with highest connection counts</p>
                        </div>
                        <div class="mb-3 p-3" style="border-left: 4px solid #ec4899; background: #f8fafc; border-radius: 8px;">
                            <strong>Mutual Friends:</strong>
                            <p class="mb-0 mt-1 small">Graph traversal discovering common connections between any two users</p>
                        </div>
                    </div>
                </div>

                <div>
                    <h5 class="fw-bold" style="color: #ec4899;"><i class="fas fa-file-csv me-2"></i> CSV Data Format</h5>
                    <p class="text-muted">Upload a CSV file with two columns (no headers required):</p>
                    <div style="background: #1e293b; color: #e2e8f0; padding: 20px; border-radius: 12px; font-family: 'Courier New', monospace;">
                        <div style="color: #10b981;">user1,user2</div>
                        <div>Aarav,Vivaan</div>
                        <div>Vivaan,Aditya</div>
                        <div>Aditya,Arjun</div>
Charlie,Alice</pre>

                <h6 class="mt-4"><i class="fas fa-rocket"></i> Quick Start</h6>
                <ol>
                    <li>Click "Load Demo Data" to populate with sample data</li>
                    <li>Go to "Analysis" to see recommendations and influencers</li>
                    <li>Visit "Visualization" for interactive graph view</li>
                    <li>Upload your own CSV file for custom analysis</li>
                </ol>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
{% endblock %}
